# Web服务管理模块

## 功能概述

Web服务管理模块用于配置和维护WSDL（Web Services Description Language）资源，支持多种录入方式和完整的CRUD操作。

## 主要功能

### 1. 检索功能
- 服务名称搜索（模糊搜索）
- 服务编码搜索（模糊搜索）
- 录入方式筛选（图形化编辑/文件上传/URL获取）
- 分类筛选
- 状态筛选（启用/禁用）

### 2. 表格功能
- **多选功能**：支持复选框多选
- **分页功能**：支持页码跳转、页面大小选择
- **排序功能**：支持多列排序
- **详细信息展示**：
  - 基本信息：服务名称、编码、分类、状态
  - WSDL信息：命名空间、操作数量
  - 文件信息：文件名、文件大小（文件上传方式）
  - URL信息：WSDL地址（URL获取方式）
  - 时间信息：创建时间、更新时间

### 3. 编辑功能（三种录入方式）

#### 方式一：图形化编辑
手动维护WSDL信息，包括：
- **基本配置**
  - 命名空间
  - 服务注解/描述
  
- **操作管理**（可添加多个操作）
  - 操作名称
  - 操作注解
  - 输入参数列表
    - 参数名称
    - 参数类型
    - 参数描述
  - 输出参数列表
    - 参数名称
    - 参数类型
    - 参数描述

#### 方式二：文件上传
- 支持点击上传或拖拽上传
- 支持文件格式：.wsdl、.xml
- 文件大小限制：最大10MB
- 自动解析WSDL文件内容

#### 方式三：URL获取
- 输入WSDL服务地址
- URL格式验证
- 一键获取WSDL内容
- 自动解析并保存

### 4. 操作功能
- **查看**：查看Web服务详细信息（只读模式）
- **编辑**：编辑已有Web服务
- **删除**：删除单个Web服务（带确认提示）
- **批量删除**：删除多个Web服务（带确认提示）
- **导出WSDL**：导出WSDL文件到本地
- **状态切换**：快速启用/禁用Web服务
- **刷新**：刷新数据列表

## 技术栈

- **React 19**：UI框架
- **Ant Design**：UI组件库
- **TanStack Query**：数据状态管理
- **TypeScript**：类型安全

## 组件结构

```
Web/
├── index.tsx                          # 主页面组件
├── components/
│   ├── index.ts                       # 组件导出
│   ├── WebServiceSearchForm.tsx       # 搜索表单组件
│   ├── WebServiceTableActions.tsx     # 表格操作按钮组件
│   ├── WebServiceTable.tsx            # 表格组件
│   ├── WebServiceModal.tsx            # 编辑弹窗主组件
│   ├── InputTypeSelector.tsx          # 录入方式选择器
│   ├── ManualWsdlEditor.tsx           # 手动编辑器
│   ├── FileUploadEditor.tsx           # 文件上传编辑器
│   └── UrlFetchEditor.tsx             # URL获取编辑器
└── README.md                          # 本文档
```

## API服务

```
services/resource/webServiceApi.ts
```

### 主要接口

- `getWebServiceList()` - 分页查询Web服务列表
- `addWebService()` - 新增Web服务
- `updateWebService()` - 更新Web服务
- `deleteWebService()` - 删除Web服务
- `batchDeleteWebService()` - 批量删除Web服务
- `getWebServiceDetail()` - 获取Web服务详情
- `uploadWsdl()` - 上传并解析WSDL文件
- `parseWsdlFromUrl()` - 从URL解析WSDL
- `validateWsdl()` - 验证WSDL内容
- `exportWsdl()` - 导出WSDL文件

## 使用说明

### 新增Web服务

1. 点击"新增"按钮
2. 填写基本信息（服务名称、编码等）
3. 选择录入方式：
   - **图形化编辑**：手动填写WSDL信息
   - **文件上传**：上传WSDL文件
   - **URL获取**：输入URL并点击"获取WSDL"
4. 填写备注信息（可选）
5. 点击"确定"保存

### 编辑Web服务

1. 在表格中找到需要编辑的记录
2. 点击"编辑"按钮
3. 修改相关信息
4. 点击"确定"保存

### 删除Web服务

- **单个删除**：点击记录后的"删除"按钮
- **批量删除**：
  1. 勾选需要删除的记录
  2. 点击顶部"批量删除"按钮
  3. 确认删除操作

### 导出WSDL

点击记录后的"导出WSDL"按钮，系统会自动下载WSDL文件到本地。

## 特性亮点

### 1. 组件化设计
- 模块化拆分，每个组件职责单一
- 便于维护和扩展

### 2. 性能优化
- 使用 `memo` 避免不必要的重渲染
- 使用 `useCallback` 缓存回调函数
- 最小化状态更新范围

### 3. 用户体验
- 友好的卡片式录入方式选择
- 直观的操作反馈
- 完善的表单验证
- 操作确认提示

### 4. 类型安全
- 完整的TypeScript类型定义
- 接口类型约束
- 减少运行时错误

## 样式特点

- 采用现代化的UI设计
- 与系统整体风格保持一致
- 使用Tailwind CSS实用类
- 响应式布局支持

## 注意事项

1. **文件上传**：确保上传的文件是有效的WSDL格式
2. **URL获取**：确保URL可访问且返回有效的WSDL内容
3. **操作权限**：删除操作不可恢复，请谨慎操作
4. **数据验证**：提交前会进行完整的表单验证

## 扩展建议

- 可添加WSDL预览功能
- 可添加WSDL测试功能
- 可添加版本管理功能
- 可添加导入导出功能
- 可添加操作日志功能

