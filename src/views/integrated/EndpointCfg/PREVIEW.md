# é¢„è§ˆåŠŸèƒ½è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

é¢„è§ˆåŠŸèƒ½å…è®¸ç”¨æˆ·åœ¨é…ç½®ç«¯ç‚¹ç±»å‹æ—¶ï¼Œå®æ—¶æŸ¥çœ‹æ ¹æ®é…ç½®ç”Ÿæˆçš„è¡¨å•æ•ˆæœï¼Œæ— éœ€ä¿å­˜å³å¯éªŒè¯é…ç½®çš„æ­£ç¡®æ€§å’Œç”¨æˆ·ä½“éªŒã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. åŠ¨æ€è¡¨å•ç”Ÿæˆ
- âœ… æ ¹æ® Schema å­—æ®µé…ç½®åŠ¨æ€æ¸²æŸ“è¡¨å•
- âœ… æ”¯æŒæ‰€æœ‰é…ç½®çš„ç»„ä»¶ç±»å‹ï¼ˆInputã€Selectã€Radioã€Checkbox ç­‰ï¼‰
- âœ… è‡ªåŠ¨åº”ç”¨å­—æ®µå±æ€§ï¼ˆå¿…å¡«ã€é»˜è®¤å€¼ã€éªŒè¯è§„åˆ™ç­‰ï¼‰
- âœ… æ”¯æŒæ¡ä»¶æ˜¾ç¤ºï¼ˆshowConditionï¼‰

### 2. å¤šæ¨¡å¼æ”¯æŒ
- âœ… æ ¹æ®ç«¯ç‚¹æ”¯æŒçš„æ¨¡å¼ï¼ˆINã€OUTã€IN_OUTã€OUT_INï¼‰åˆ† Tab å±•ç¤º
- âœ… è‡ªåŠ¨è¿‡æ»¤æ¯ä¸ªæ¨¡å¼ä¸‹å¯¹åº”çš„å­—æ®µ
- âœ… æ˜¾ç¤ºæ¯ä¸ªæ¨¡å¼ä¸‹çš„å­—æ®µæ•°é‡

### 3. åŒè§†å›¾åˆ‡æ¢
- âœ… **è¡¨å•è§†å›¾**ï¼šå¯äº¤äº’çš„åŠ¨æ€è¡¨å•ï¼Œæ”¯æŒæ•°æ®å¡«å†™å’ŒéªŒè¯
- âœ… **JSON è§†å›¾**ï¼šå®Œæ•´çš„é…ç½® JSON æ•°æ®ï¼Œä¾¿äºå¼€å‘è°ƒè¯•

### 4. æ•°æ®éªŒè¯
- âœ… æ”¯æŒè¡¨å•éªŒè¯ï¼ˆå¿…å¡«ã€è‡ªå®šä¹‰è§„åˆ™ï¼‰
- âœ… ç‚¹å‡»ã€ŒéªŒè¯å¹¶æŸ¥çœ‹æ•°æ®ã€æŒ‰é’®æŸ¥çœ‹å¡«å†™çš„æ•°æ®
- âœ… ä»¥å‹å¥½çš„ JSON æ ¼å¼å±•ç¤ºè¡¨å•æ•°æ®

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šæ–°å¢ç«¯ç‚¹ç±»å‹æ—¶é¢„è§ˆ
1. ç‚¹å‡»ã€Œæ–°å¢ç«¯ç‚¹ç±»å‹ã€æŒ‰é’®
2. å¡«å†™åŸºæœ¬ä¿¡æ¯å’Œå­—æ®µé…ç½®
3. ç‚¹å‡»ã€Œé¢„è§ˆã€æŒ‰é’®ï¼ˆæ— éœ€ä¿å­˜ï¼‰
4. æŸ¥çœ‹ç”Ÿæˆçš„è¡¨å•æ•ˆæœ
5. è¿”å›ç»§ç»­è°ƒæ•´é…ç½®

### åœºæ™¯ 2ï¼šç¼–è¾‘å·²æœ‰é…ç½®æ—¶é¢„è§ˆ
1. é€‰æ‹©ä¸€ä¸ªå·²æœ‰çš„ç«¯ç‚¹ç±»å‹
2. ç‚¹å‡»ã€Œç¼–è¾‘ã€æŒ‰é’®
3. ä¿®æ”¹é…ç½®
4. ç‚¹å‡»ã€Œé¢„è§ˆã€æŒ‰é’®æŸ¥çœ‹ä¿®æ”¹åçš„æ•ˆæœ

### åœºæ™¯ 3ï¼šæŸ¥çœ‹æ¨¡å¼é¢„è§ˆ
1. é€‰æ‹©ä¸€ä¸ªå·²æœ‰çš„ç«¯ç‚¹ç±»å‹
2. ç›´æ¥ç‚¹å‡»ã€Œé¢„è§ˆã€æŒ‰é’®
3. åœ¨ä¸åŒçš„æ¨¡å¼ Tab é—´åˆ‡æ¢ï¼ŒæŸ¥çœ‹å„æ¨¡å¼ä¸‹çš„è¡¨å•

## ğŸ—ï¸ æŠ€æœ¯å®ç°

### ç»„ä»¶æ¶æ„

```
PreviewModal (é¢„è§ˆå¼¹çª—)
â”œâ”€â”€ PreviewFormRenderer (è¡¨å•æ¸²æŸ“å™¨)
â”‚   â””â”€â”€ PreviewFormField Ã— N (å­—æ®µæ¸²æŸ“)
â””â”€â”€ JSON è§†å›¾
```

### ç»„ä»¶è¯´æ˜

#### 1. PreviewModal.tsx
**èŒè´£**ï¼šé¢„è§ˆå¼¹çª—ä¸»ç»„ä»¶ï¼Œè´Ÿè´£æ•´ä½“å¸ƒå±€å’Œäº¤äº’é€»è¾‘

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºç«¯ç‚¹é…ç½®çš„åŸºæœ¬ä¿¡æ¯
- ç®¡ç†è¡¨å•è§†å›¾å’Œ JSON è§†å›¾çš„åˆ‡æ¢
- å¤„ç†è¡¨å•éªŒè¯å’Œæ•°æ®æŸ¥çœ‹
- æä¾›é‡ç½®è¡¨å•åŠŸèƒ½

**Props**ï¼š
```typescript
interface PreviewModalProps {
  visible: boolean;              // æ˜¯å¦æ˜¾ç¤º
  config: EndpointTypeConfig;    // ç«¯ç‚¹é…ç½®æ•°æ®
  onClose: () => void;           // å…³é—­å›è°ƒ
}
```

#### 2. PreviewFormRenderer.tsx
**èŒè´£**ï¼šåŠ¨æ€è¡¨å•æ¸²æŸ“å™¨ï¼Œæ ¹æ®å­—æ®µé…ç½®ç”Ÿæˆè¡¨å•

**åŠŸèƒ½**ï¼š
- æ ¹æ®ä½œç”¨æ¨¡å¼è¿‡æ»¤å­—æ®µ
- æŒ‰æ’åºå·å¯¹å­—æ®µæ’åº
- å“åº”å¼å¸ƒå±€ï¼ˆTextArea å’Œ JSON ç¼–è¾‘å™¨å æ»¡ä¸€è¡Œï¼Œå…¶ä»–ç»„ä»¶ä¸¤åˆ—å¸ƒå±€ï¼‰
- ç›‘å¬è¡¨å•å€¼å˜åŒ–ï¼Œæ”¯æŒæ¡ä»¶æ˜¾ç¤º

**Props**ï¼š
```typescript
interface PreviewFormRendererProps {
  form: FormInstance;            // è¡¨å•å®ä¾‹
  fields: SchemaField[];         // å­—æ®µé…ç½®åˆ—è¡¨
  mode?: string;                 // ä½œç”¨æ¨¡å¼
  initialValues?: Record<string, any>;  // åˆå§‹å€¼
}
```

#### 3. PreviewFormField.tsx
**èŒè´£**ï¼šå•ä¸ªå­—æ®µæ¸²æŸ“ç»„ä»¶ï¼Œæ ¹æ®ç»„ä»¶ç±»å‹æ¸²æŸ“å¯¹åº”çš„è¡¨å•æ§ä»¶

**åŠŸèƒ½**ï¼š
- æ ¹æ® component ç±»å‹æ¸²æŸ“å¯¹åº”çš„ Ant Design ç»„ä»¶
- è§£æå¹¶åº”ç”¨ properties é…ç½®
- è§£æå¹¶åº”ç”¨éªŒè¯è§„åˆ™
- æ”¯æŒæ¡ä»¶æ˜¾ç¤ºï¼ˆshowConditionï¼‰
- ä½¿ç”¨ memo ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

**Props**ï¼š
```typescript
interface PreviewFormFieldProps {
  field: SchemaField;            // å­—æ®µé…ç½®
  formValues?: Record<string, any>;  // è¡¨å•å€¼ï¼ˆç”¨äºæ¡ä»¶æ˜¾ç¤ºï¼‰
}
```

### æ”¯æŒçš„ç»„ä»¶ç±»å‹

| ç»„ä»¶ç±»å‹ | æ¸²æŸ“ç»„ä»¶ | æ”¯æŒçš„å±æ€§ |
|---------|---------|-----------|
| Input | Input | placeholder, maxLength, showCount, disabled |
| InputPassword | Input.Password | placeholder, maxLength, disabled |
| InputNumber | InputNumber | placeholder, min, max, step, precision, disabled |
| TextArea | Input.TextArea | placeholder, rows, maxLength, showCount, disabled |
| JSON | CodeEditor | height, disabled |
| Select | Select | placeholder, options, mode, disabled, showSearch |
| Radio | Radio.Group | options, disabled, optionType |
| Checkbox | Checkbox.Group | options, disabled |
| Switch | Switch | disabled, checkedChildren, unCheckedChildren |
| DatePicker | DatePicker | placeholder, format, showTime, disabled |

## ğŸ¨ ç•Œé¢è®¾è®¡

### è®¾è®¡åŸåˆ™
- âœ… **ç®€æ´å¤§æ°”**ï¼šé‡‡ç”¨ç°ä»£åŒ–çš„å¡ç‰‡å¼è®¾è®¡ï¼Œä¿¡æ¯å±‚æ¬¡æ¸…æ™°
- âœ… **å“åº”å¼å¸ƒå±€**ï¼šè‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
- âœ… **æ¸è¿›å¼åŠ¨ç”»**ï¼šå¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- âœ… **è‰²å½©ç»Ÿä¸€**ï¼šä½¿ç”¨ Ant Design å’Œ Tailwind CSS çš„è‰²å½©ä½“ç³»

### å…³é”®æ ·å¼
- ä½¿ç”¨ Tailwind CSS å®ç”¨ç±»å¿«é€Ÿæ„å»ºå¸ƒå±€
- æ¸å˜èƒŒæ™¯çªå‡ºé‡è¦ä¿¡æ¯åŒºåŸŸ
- å¡ç‰‡é˜´å½±å’Œè¾¹æ¡†å¢å¼ºè§†è§‰å±‚æ¬¡
- å¹³æ»‘çš„ fadeIn åŠ¨ç”»

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šåŸºç¡€é¢„è§ˆ
```typescript
// ç‚¹å‡»é¢„è§ˆæŒ‰é’®
<Button 
  color='cyan' 
  variant='outlined' 
  icon={<EyeOutlined />} 
  onClick={handlePreview}
>
  é¢„è§ˆ
</Button>

// é¢„è§ˆå¼¹çª—è‡ªåŠ¨å±•ç¤ºé…ç½®çš„è¡¨å•
<PreviewModal
  visible={previewVisible}
  config={getPreviewConfig()}
  onClose={() => setPreviewVisible(false)}
/>
```

### ç¤ºä¾‹ 2ï¼šæ¡ä»¶æ˜¾ç¤ºå­—æ®µ
```json
{
  "field": "password",
  "label": "å¯†ç ",
  "component": "InputPassword",
  "showCondition": "formValues.needAuth === true"
}
```

å½“è¡¨å•ä¸­ `needAuth` å­—æ®µä¸º `true` æ—¶ï¼Œå¯†ç å­—æ®µæ‰ä¼šæ˜¾ç¤ºã€‚

### ç¤ºä¾‹ 3ï¼šè‡ªå®šä¹‰éªŒè¯è§„åˆ™
```json
{
  "field": "port",
  "label": "ç«¯å£å·",
  "component": "InputNumber",
  "rules": "[{\"min\": 1, \"max\": 65535, \"message\": \"ç«¯å£å·å¿…é¡»åœ¨1-65535ä¹‹é—´\"}]"
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¼–è¾‘æ¨¡å¼é¢„è§ˆ**ï¼š
   - ç¼–è¾‘æ¨¡å¼ä¸‹ç‚¹å‡»é¢„è§ˆä¼šå…ˆéªŒè¯åŸºç¡€ä¿¡æ¯è¡¨å•
   - è‡³å°‘éœ€è¦é…ç½®ä¸€ä¸ªå­—æ®µæ‰èƒ½é¢„è§ˆ
   - é¢„è§ˆæ—¶ä½¿ç”¨å½“å‰ç¼–è¾‘çš„æ•°æ®ï¼ˆæœªä¿å­˜ï¼‰

2. **æŸ¥çœ‹æ¨¡å¼é¢„è§ˆ**ï¼š
   - å¿…é¡»å…ˆé€‰æ‹©ä¸€ä¸ªç«¯ç‚¹ç±»å‹
   - ä½¿ç”¨å·²ä¿å­˜çš„æ•°æ®è¿›è¡Œé¢„è§ˆ

3. **æ¡ä»¶æ˜¾ç¤º**ï¼š
   - `showCondition` ä½¿ç”¨ JavaScript è¡¨è¾¾å¼
   - å¯ä»¥è®¿é—® `formValues` å¯¹è±¡è·å–è¡¨å•å€¼
   - è¡¨è¾¾å¼æ‰§è¡Œå¤±è´¥æ—¶é»˜è®¤æ˜¾ç¤ºå­—æ®µ

4. **éªŒè¯è§„åˆ™**ï¼š
   - `rules` å­—æ®µéœ€è¦æ˜¯ JSON æ ¼å¼çš„å­—ç¬¦ä¸²
   - æ”¯æŒ Ant Design Form çš„æ‰€æœ‰éªŒè¯è§„åˆ™

5. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - æ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨ `memo` ä¼˜åŒ–
   - é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
   - å¤§è¡¨å•ä¹Ÿèƒ½æµç•…è¿è¡Œ

## ğŸ”§ é…ç½®å­—æ®µè¯´æ˜

### SchemaField å­—æ®µè¯¦è§£

```typescript
interface SchemaField {
  id?: string;                  // å”¯ä¸€æ ‡è¯†ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
  field: string;                // å­—æ®µåï¼ˆå¿…å¡«ï¼‰
  label: string;                // å­—æ®µæ ‡ç­¾ï¼ˆå¿…å¡«ï¼‰
  component: string;            // ç»„ä»¶ç±»å‹ï¼ˆå¿…å¡«ï¼‰
  defaultValue?: any;           // é»˜è®¤å€¼
  properties: Record<string, any>;  // ç»„ä»¶å±æ€§é…ç½®
  rules?: string;               // éªŒè¯è§„åˆ™ï¼ˆJSONå­—ç¬¦ä¸²ï¼‰
  showCondition?: string;       // æ˜¾ç¤ºæ¡ä»¶ï¼ˆJSè¡¨è¾¾å¼ï¼‰
  sortOrder?: number;           // æ’åºå·
  mode: string;                 // ä½œç”¨æ¨¡å¼
  description?: string;         // è¯´æ˜ï¼ˆæ˜¾ç¤ºä¸ºæç¤ºï¼‰
}
```

### properties é…ç½®ç¤ºä¾‹

#### Input ç»„ä»¶
```json
{
  "placeholder": "è¯·è¾“å…¥ç”¨æˆ·å",
  "maxLength": 50,
  "showCount": true,
  "disabled": false
}
```

#### Select ç»„ä»¶
```json
{
  "placeholder": "è¯·é€‰æ‹©",
  "options": [
    { "label": "é€‰é¡¹1", "value": "1" },
    { "label": "é€‰é¡¹2", "value": "2" }
  ],
  "mode": "multiple",
  "showSearch": true
}
```

#### InputNumber ç»„ä»¶
```json
{
  "min": 0,
  "max": 100,
  "step": 1,
  "precision": 2
}
```

## ğŸ“ˆ åç»­ä¼˜åŒ–æ–¹å‘

- [ ] æ”¯æŒè¡¨å•å¸ƒå±€é…ç½®ï¼ˆæ¨ªå‘/çºµå‘ï¼‰
- [ ] æ”¯æŒå­—æ®µåˆ†ç»„æ˜¾ç¤º
- [ ] æ”¯æŒæ›´å¤šç»„ä»¶ç±»å‹ï¼ˆUploadã€Cascader ç­‰ï¼‰
- [ ] æ”¯æŒè¡¨å•è”åŠ¨ï¼ˆå­—æ®µé—´çš„ä¾èµ–å…³ç³»ï¼‰
- [ ] æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶æ‰©å±•
- [ ] é¢„è§ˆæ•°æ®æŒä¹…åŒ–ï¼ˆè®°ä½ä¸Šæ¬¡å¡«å†™çš„æ•°æ®ï¼‰

## ğŸ‰ æ€»ç»“

é¢„è§ˆåŠŸèƒ½ä¸ºç«¯ç‚¹é…ç½®æä¾›äº†æ‰€è§å³æ‰€å¾—çš„ä½“éªŒï¼Œå¤§å¤§æå‡äº†é…ç½®æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚é€šè¿‡å®æ—¶é¢„è§ˆï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¿å­˜å‰éªŒè¯é…ç½®æ•ˆæœï¼Œå‡å°‘é…ç½®é”™è¯¯ï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚

